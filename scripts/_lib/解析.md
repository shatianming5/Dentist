# scripts/_lib 解析

这个目录放 `scripts/` 下多个入口脚本都会用到的“小而稳”的公共工具；原则：

- 只放 **通用** 逻辑（时间、IO、seed、git/env 信息等）。
- 不把业务（raw_cls / teeth3ds / paper）塞进来；业务逻辑放到 `scripts/<task>/`。
- 尽量减少依赖，避免 import 一堆深层模块导致启动慢/报错难定位。

## 文件地图（从用户视角）

- `time.py`：`utc_now_iso()`（统一的 UTC 时间戳格式）
- `io.py`：`read_json/read_jsonl/write_json/write_jsonl`
- `hash.py`：`sha1_file()`（文件校验/追踪输入变更）
- `git.py`：`get_git_info()`（commit/dirty）
- `env.py`：`get_env_info()`（python/numpy/torch/cuda/cudnn）
- `seed.py`：`set_seed()`（训练可复现相关）
- `device.py`：`normalize_device()`（auto/cuda/cpu 归一化）
- `point_ops.py`：点云常用算子（`knn/get_graph_feature`）
- `yaml_cfg.py`：YAML 配置工具（defaults 合并、插值、写回）

## 常见报错定位

- `ModuleNotFoundError: _lib ...`  
  你可能不是在仓库根目录执行（建议 `cd <repo_root>` 后再运行 `python3 scripts/...`）。
- `json.decoder.JSONDecodeError`  
  先检查输入 JSON/JSONL 文件是否被截断/空行/编码问题，再定位具体行号。
