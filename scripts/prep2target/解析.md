# scripts/prep2target 解析

这里放 **prep2target（点云回归/约束评估）** 相关模块，主要覆盖：

- 数据构建（raw_prep2target）
- 训练/微调（raw_prep2target_finetune）
- teeth3ds 约束评估与训练（prep2target_constraints）

## 典型入口（原 scripts 根目录仍保留兼容）

- `scripts/phase4_build_raw_prep2target.py`
- `scripts/phase4_train_raw_prep2target_finetune.py`
- `scripts/phase3_train_teeth3ds_prep2target.py`
- `scripts/phase4_train_teeth3ds_prep2target_constraints.py`
- `scripts/phase4_eval_teeth3ds_constraints_run.py`
- `scripts/run_constraints_eval_suite.py`

## 常见排错路径

- 数据读不到：先查 `processed/raw_prep2target/**` 与 `metadata/**`
- 指标异常：先查约束定义/单位，再查 eval 脚本的聚合逻辑

## 模块索引（用于拆解复用）

- `scripts/prep2target/metrics.py`：chamfer / margin / occlusion 等核心指标与约束
- `scripts/prep2target/stats.py`：pearson / spearman（无 scipy 依赖）
- `scripts/prep2target/models.py`：PointNet encoder + MLP decoder + (Label)Prep2TargetNet
- `scripts/prep2target/dataset_raw.py`：raw_prep2target 的 dataset 封装
- `scripts/prep2target/preview.py`：简单的点云预览落盘（PLY/NPZ 辅助）
